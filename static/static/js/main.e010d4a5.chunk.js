(this["webpackJsonpmy-planer"]=this["webpackJsonpmy-planer"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(11),i=n.n(r),l=(n(102),n(103),n(148)),s=n(160),o=n(154),d=n(152),u=n(64),j=(n(104),n(32)),b=n(75),O=n(151),v=n(81),h=n.n(v),f=n(82),m=n.n(f),x=["\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043e\u0442\u0430"],g=["\u042f\u043d\u0432\u0430\u0440\u044f","\u0424\u0435\u0432\u0440\u0430\u043b\u044f","\u041c\u0430\u0440\u0442\u0430","\u0410\u043f\u0440\u0435\u043b\u044f","\u041c\u0430\u044f","\u0418\u044e\u043d\u044f","\u0418\u044e\u043b\u044f","\u0410\u0432\u0433\u0443\u0441\u0442\u0430","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u041e\u043a\u0442\u044f\u0431\u0440\u044f","\u041d\u043e\u044f\u0431\u0440\u044f","\u0414\u0435\u043a\u0430\u0431\u0440\u044f"],p=864e5,k=function(e){for(var t=e-((new Date(e).getDay()||7)-1)*p,n=[],a=0;a<7;a++)n.push(t+p*a);return n},y=function(e){var t=new Date(e);return"".concat(t.getDate(),"  ").concat(g[t.getMonth()])},N=(n(105),n(16)),S=n(78),C=n.n(S),D=n(150),w=n(80),T=n.n(w),W=n(79),F=n.n(W),I=(n(106),n(74),n(155)),J=n(159),R=n(149),E=n(146),M=n(147),P=n(145),B=n(37),L=n.n(B),z=n(76),A=n(15),G=n(156),H=n(153),K=n(157),q=n(4);L.a.locale("ru");var Q=function(e){var t=e.isOpen,n=e.task,c=e.onSave,r=e.onClose,i=Object(a.useState)(),l=Object(j.a)(i,2),s=l[0],o=l[1];Object(a.useEffect)((function(){o(null!==n&&void 0!==n?n:{})}),[n]);var d=function(){if(s){var e,t,n,a,i,l={id:s.id,date:null!==(e=s.date)&&void 0!==e?e:null,urgent:null!==(t=s.urgent)&&void 0!==t&&t,name:null!==(n=s.name)&&void 0!==n?n:null,description:null!==(a=s.description)&&void 0!==a?a:null,status:null!==(i=s.status)&&void 0!==i?i:null};c(l),r()}};return Object(q.jsx)(A.a,{utils:z.a,locale:"ru",children:Object(q.jsx)("div",{children:Object(q.jsxs)(J.a,{open:t,onClose:r,"aria-labelledby":"form-dialog-title",children:[Object(q.jsx)(P.a,{id:"form-dialog-title",children:(null===s||void 0===s?void 0:s.id)?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438":"\u041d\u043e\u0432\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430"}),Object(q.jsxs)(E.a,{children:[Object(q.jsx)(M.a,{children:new Date((null===s||void 0===s?void 0:s.date)?null===s||void 0===s?void 0:s.date:0).toLocaleDateString()}),Object(q.jsx)("form",{name:"taskForm",onSubmit:d,children:Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(G.a,{disableToolbar:!0,lang:"ru",variant:"inline",format:"DD.MM.yyyy",margin:"normal",id:"date",label:"\u0414\u0430\u0442\u0430",value:null===s||void 0===s?void 0:s.date,onChange:function(e){var t;o(Object(N.a)(Object(N.a)({},s),{},{date:null!==(t=null===e||void 0===e?void 0:e.valueOf())&&void 0!==t?t:null}))}}),Object(q.jsx)(H.a,{control:Object(q.jsx)(K.a,{checked:!!(null===s||void 0===s?void 0:s.urgent),onChange:function(e){o(Object(N.a)(Object(N.a)({},s),{},{urgent:e.target.checked}))},name:"urgent",color:"primary"}),label:"\u0412\u0430\u0436\u043d\u043e"}),Object(q.jsx)(I.a,{margin:"dense",id:"name",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",type:"text",value:null===s||void 0===s?void 0:s.name,onChange:function(e){console.log(e.target.value),o(Object(N.a)(Object(N.a)({},s),{},{name:e.target.value}))},fullWidth:!0}),Object(q.jsx)(I.a,{margin:"dense",id:"description",label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",type:"text",value:null===s||void 0===s?void 0:s.description,onChange:function(e){console.log(e.target.value),o(Object(N.a)(Object(N.a)({},s),{},{description:e.target.value}))},fullWidth:!0})]})})]}),Object(q.jsxs)(R.a,{children:[Object(q.jsx)(D.a,{onClick:r,color:"primary",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(q.jsx)(D.a,{onClick:d,color:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})})})},U=Object(l.a)((function(e){return Object(s.a)({button:{margin:e.spacing(1)}})})),V=function(e){var t=e.day,n=e.dayTasks,c=e.onSave,r=e.onDelete,i=U(),l=Object(a.useState)(!1),s=Object(j.a)(l,2),o=s[0],d=s[1],u=Object(a.useState)(null),b=Object(j.a)(u,2),O=b[0],v=b[1],h=function(e){v(null!==e&&void 0!==e?e:{date:t}),d(!0)};return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(Q,{isOpen:o,task:O,onSave:c,onClose:function(){v(null),d(!1)}}),Object(q.jsxs)("div",{className:"tasks",children:[Object(q.jsx)(D.a,{variant:"outlined",className:i.button,startIcon:Object(q.jsx)(C.a,{}),color:"primary",onClick:function(){return h(null)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),n.map((function(e){return Object(q.jsxs)("div",{className:"task",children:[Object(q.jsx)(K.a,{checked:!!e.status,name:"urgent",color:"primary",className:"task-status",onChange:function(){return function(e){console.log(e),c(Object(N.a)(Object(N.a)({},e),{},{status:!e.status||!e.status}))}(e)}}),Object(q.jsxs)("button",{onClick:function(){return h(e)},className:"task-value",children:[Object(q.jsxs)("div",{children:[e.urgent?Object(q.jsx)("span",{className:"warning",children:Object(q.jsx)(F.a,{})}):null,e.name]}),Object(q.jsx)("div",{children:e.description}),Object(q.jsx)("div",{children:e.description||e.name?null:Object(q.jsx)("span",{className:"noname",children:" \u0417\u0430\u0434\u0430\u0447\u0430 \u043d\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0430"})})]}),Object(q.jsx)("button",{className:"delete",onClick:function(){return t=e.id||0,console.log(t),void r(t);var t},children:Object(q.jsx)(T.a,{})})]},e.id)}))]})]})},X=n(60),Y="TASKS",Z=function(){var e=localStorage.getItem(Y);return e?JSON.parse(e):[]},$=function(e){var t=Object(N.a)(Object(N.a)({},e),{},{id:Date.now()}),n=Z(),a=[].concat(Object(X.a)(n),[t]),c=JSON.stringify(a);return localStorage.setItem(Y,c),!0},_=function(e){var t=Z(),n=[].concat(Object(X.a)(t.filter((function(t){return t.id!==e.id}))),[e]),a=JSON.stringify(n);return localStorage.setItem(Y,a),!0},ee=function(e){var t=e.getTasksFromStore;return{handleSave:function(e){(e.id?_:$)(e)&&t()},handleDeleteTask:function(e){(function(e){var t=Z(),n=Object(X.a)(t.filter((function(t){return t.id!==e})));console.log(n);var a=JSON.stringify(n);return localStorage.setItem(Y,a),!0})(e)&&t()}}},te=Object(l.a)((function(e){return Object(s.a)({margin:{margin:e.spacing(1)},extendedIcon:{marginRight:e.spacing(1)}})})),ne=(new Date).setHours(0,0,0,0),ae=function(e){return t=new Date(e).getDay(),x[t];var t},ce=function(e,t){return e.filter((function(e){return e.date&&e.date>=t&&e.date<t+p}))},re=function(e){Object(b.a)(e);var t=te(),n=Object(a.useState)([]),c=Object(j.a)(n,2),r=c[0],i=c[1],l=Object(a.useState)(ne),s=Object(j.a)(l,2),o=s[0],d=s[1],u=k(o),v=k(o+6048e5),f=k(o-6048e5),x=function(){var e=Z();i(e.sort((function(e,t){var n,a;return(null!==(n=e.id)&&void 0!==n?n:0)-(null!==(a=t.id)&&void 0!==a?a:0)})))};Object(a.useEffect)((function(){x()}),[]);var g=ee({getTasksFromStore:x}),p=g.handleSave,N=g.handleDeleteTask,S=function(e){var t=e.currentDay,n=e.setCurrentDay,c=e.tasks,r=Object(a.useRef)(null);return Object(a.useEffect)((function(){r.current&&r.current.scrollTo({left:r.current.offsetWidth})}),[t,c]),{scrollableWrapperRef:r,handleClickPreviousWeek:function(){r.current&&(r.current.scrollTo({left:0,behavior:"smooth"}),setTimeout((function(){n(t-6048e5)}),1e3))},handleClickNextWeek:function(){r.current&&(r.current.scrollTo({left:r.current.scrollWidth,behavior:"smooth"}),setTimeout((function(){n(t+6048e5)}),1e3))}}}({currentDay:o,setCurrentDay:d,tasks:r}),C=S.scrollableWrapperRef,D=S.handleClickPreviousWeek,w=S.handleClickNextWeek;return Object(q.jsxs)("div",{className:"wrapper",children:[Object(q.jsxs)("h1",{className:"week-block",children:[Object(q.jsx)(O.a,{"aria-label":"delete",className:t.margin,onClick:D,children:Object(q.jsx)(h.a,{fontSize:"large"})}),Object(q.jsx)("span",{className:"week-name",children:"".concat(y(u[0])," - ").concat(y(u[6]))}),Object(q.jsx)(O.a,{"aria-label":"delete",className:t.margin,onClick:w,children:Object(q.jsx)(m.a,{fontSize:"large"})})]}),Object(q.jsxs)("div",{className:"weeks",ref:C,children:[Object(q.jsx)("div",{className:"week",children:f.map((function(e){return Object(q.jsx)("div",{className:"day",children:Object(q.jsxs)("div",{className:"content-day-wrapper",children:[Object(q.jsxs)("div",{className:"day-headline",children:[Object(q.jsx)("h4",{children:y(e)}),Object(q.jsx)("h6",{children:ae(e)})]}),Object(q.jsx)(V,{day:e,dayTasks:ce(r,e),onSave:p,onDelete:N})]})})}))}),Object(q.jsx)("div",{className:"week",children:u.map((function(e){return Object(q.jsx)("div",{className:"day",children:Object(q.jsxs)("div",{className:"content-day-wrapper",children:[Object(q.jsxs)("div",{className:"day-headline",children:[Object(q.jsx)("h4",{children:y(e)}),Object(q.jsx)("h6",{children:ae(e)})]}),Object(q.jsx)(V,{day:e,dayTasks:ce(r,e),onSave:p,onDelete:N})]})})}))}),Object(q.jsx)("div",{className:"week",children:v.map((function(e){return Object(q.jsx)("div",{className:"day",children:Object(q.jsxs)("div",{className:"content-day-wrapper",children:[Object(q.jsxs)("div",{className:"day-headline",children:[Object(q.jsx)("h4",{children:y(e)}),Object(q.jsx)("h6",{children:ae(e)})]}),Object(q.jsx)(V,{day:e,dayTasks:ce(r,e),onSave:p,onDelete:N})]})})}))})]})]})},ie=Object(l.a)((function(e){return Object(s.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}})}));var le=function(){var e=ie();return Object(q.jsxs)("div",{className:"App",children:[Object(q.jsx)("div",{className:e.root,children:Object(q.jsx)(o.a,{position:"static",children:Object(q.jsx)(d.a,{children:Object(q.jsx)(u.a,{variant:"h6",className:e.title,children:"\u041c\u043e\u0439 \u043f\u043b\u0430\u043d\u0435\u0440"})})})}),Object(q.jsx)(re,{})]})},se=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,163)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(q.jsx)(c.a.StrictMode,{children:Object(q.jsx)(le,{})}),document.getElementById("root")),se()}},[[112,1,2]]]);
//# sourceMappingURL=main.e010d4a5.chunk.js.map